# Trail Refactor Work Order

- [x] Identify trail-related logic in main.js and supporting modules; note duplication/divergent behavior.
- [x] Extract trail loading/registry logic into a dedicated class/module with clear interfaces.
- [x] Extract trail selection/display logic into a dedicated class/module.
- [x] Update main.js to use new classes and remove duplicated logic.
- [x] Add/extend tests for trail loading and display, covering all branches (defaults, editor trails, missing/invalid, fallbacks).
- [x] Ensure tests are deterministic and maximize branch coverage.
- [x] Run relevant tests.
